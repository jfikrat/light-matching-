# Light Matching Application Overview

## Purpose
Light Matching is a Next.js web application that lets sellers transform plain product photos into stylized marketing shots. Users upload a product photo, choose a predefined photography template, and receive up to eight AI‑generated variations tailored to e‑commerce and fashion contexts.

## Tech Stack
- **Next.js 14** with the App Router for server and client rendering
- **React 18** for UI components
- **OpenAI GPT‑5** for generating template‑specific prompts
- **Google Nano Banana** for text‑and‑image conditioned image generation

## User Workflow
1. **Upload Product Photo** – user supplies a base image of their product.
2. **Select Template** – the interface presents ready‑made templates (e.g., street photography, cut‑out photography) with thumbnail previews.
3. **Set Generation Count** – user chooses how many results to generate (maximum of 8).
4. **Generate** – application requests GPT‑5 prompts for the selected template and product image, then feeds each prompt and the same product image to Google Nano Banana.
5. **Result Gallery** – the server responds with the generated images for display and download.

## API Endpoints
| Endpoint | Description |
|----------|-------------|
| `POST /api/prompts` | Accepts `template`, optional `productDescription`, optional base64 image, and `count`; returns an array of prompts generated by GPT‑5. |
| `POST /api/images` | Sends `prompt`, optional `image`, and `count` to Google Nano Banana; returns generated images. |
| `POST /api/generate` | Orchestrates the full flow: accepts `template`, `image`, `count`, and optional `productDescription`; internally calls the prompt and image endpoints and returns prompts plus images. |

## Helper Libraries
- `lib/generatePrompts.js` – wraps the OpenAI SDK to produce structured prompt lists.
- `lib/nanoBanana.js` – posts multipart form data to the Google Nano Banana endpoint.

## Environment Variables
| Variable | Purpose |
|----------|---------|
| `OPENAI_API_KEY` | Authentication key for GPT‑5 prompt generation. |
| `GOOGLE_NANO_BANANA_API_KEY` | API key for Google Nano Banana. |
| `GOOGLE_NANO_BANANA_ENDPOINT` | Optional override for the default Nano Banana endpoint. |

## Directory Structure
```
.
├── app/               # Next.js App Router pages and API routes
│   ├── api/
│   │   ├── prompts/   # GPT‑5 prompt generation endpoint
│   │   ├── images/    # Nano Banana image generation endpoint
│   │   └── generate/  # Combined generation endpoint
│   ├── layout.js      # Root layout
│   └── page.js        # Landing page
├── lib/
│   ├── generatePrompts.js
│   └── nanoBanana.js
├── next.config.js     # Next.js configuration
├── package.json       # Project scripts and dependencies
├── README.md          # Quick start guide
└── APPLICATION.md     # (this file) comprehensive project overview
```

## Development
- **Install dependencies:** `npm install` (requires access to npm registry)
- **Start dev server:** `npm run dev`
- **Run tests:** `npm test`
- **Build for production:** `npm run build`

## Future Enhancements
- Implement user authentication and session management.
- Build a template gallery UI with thumbnails and categories.
- Add persistent storage for user uploads and generated images.
- Improve error handling, concurrency control, and logging around external API calls.

